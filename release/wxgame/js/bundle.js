!function(){"use strict";class t{constructor(){this.grade=1,this.coin=0,this.skinId=0,this.skinArr=[1,0,0,0,0],this.msId=0,this.msArr=[1,0,0,0,0,0],this.exitTime=0}}class e{static getPlayerData(){return localStorage.getItem("playerData")?null==this._playerData&&(this._playerData=JSON.parse(localStorage.getItem("playerData"))):(this._playerData=new t,localStorage.setItem("playerData",JSON.stringify(this._playerData))),this._playerData}static setPlayerData(){localStorage.setItem("playerData",JSON.stringify(this._playerData))}static changeCoin(t){this._playerData.coin+=t,this.setPlayerData()}static setExitTime(){this._playerData.exitTime=(new Date).getTime(),this.setPlayerData()}static getFruitColor(t){return 0==t?Laya.Color.RED:1==t?Laya.Color.GREEN:2==t?Laya.Color.YELLOW:void 0}}e._playerData=null,e.powerMax=10,e.tempSkinId=-1,e.roadArr1=[],e.roadArr2=[],e.roadArr3=[];class a{static httpRequest(t,e,a="get",i){var n=new Laya.HttpRequest;n.http.timeout=5e3,n.once(Laya.Event.COMPLETE,this,i),n.once(Laya.Event.ERROR,this,this.httpRequest,[t,e,a,i]),"get"==a?n.send(t+"?"+e,"",a,"text"):"post"==a&&n.send(t,JSON.stringify(e),a,"text")}static shuffleArr(t){let e=t.length;for(;e;){let a=Math.floor(Math.random()*e--);[t[a],t[e]]=[t[e],t[a]]}return t}static fixNodeY(t){t.y=t.y*Laya.stage.displayHeight/Laya.stage.designHeight}static visibleDelay(t,e=1500){t.visible=!1,Laya.timer.once(e,this,()=>{t.visible=!0})}static tMove(t,e,a,i,n){Laya.Tween.to(t,{x:e,y:a},i,null,new Laya.Handler(this,()=>{n&&n()}))}}var i;!function(t){t.SCENE_FRIENDGAME="JJExport/FriendGameUI.scene",t.SCENE_SCROLLUI="JJExport/ScrollUI.scene",t.SCENE_RECOMMENDUI="JJExport/RecommendUI.scene",t.SCENE_FULLGAMEUI="JJExport/FullGameUI.scene",t.SCENE_FINISHGAMEUI="JJExport/FinishGameUI.scene",t.SCENE_DRAWUI="JJExport/DrawUI.scene",t.SCENE_PROGRAMUI="JJExport/ProgramUI.scene",t.SCENE_WECHATUI="JJExport/WeChatUI.scene",t.SCENE_STARTNAVUI="JJExport/StartNavUI.scene"}(i||(i={}));class n{constructor(){this.dataConfig={allow_share:!0,front_allow_return:!0,front_banner_number:8,front_banner_second:800,front_button_second:300,front_ckin_banner_move:700,front_ckin_banner_second:500,front_direct_draw:!0,front_extra_share:!1,front_home_screen_level:10,front_home_screen_number:5,front_lucky_screen_chance:50,front_lucky_screen_level:20,front_lucky_screen_number:5,front_pass_gate:10,front_proceed_game:1e3,front_proceed_history:1,front_share_config:{image:"https://oss.99huyu.cn/wxhuyu/a1f98703efb3f3bfe2b9a4d5a250f926.png",title:"根据实际年纪看看你该在啥水平..."},front_share_number:4,is_allow_area:1},this.navDataArr=[],this.JJConfigUrl="https://wxhy.jiujiuhuyu.com/m/cgchongguan/config.json",this.isFinished=!1,this.isNavigating=!1}static get instance(){return this._instance||(this._instance=new n),this._instance}canShowFullScreen(t){return t>this.dataConfig.front_auto_remen_level}initJJ(t="1.0.0",e){a.httpRequest(this.JJConfigUrl,"version="+t,"get",t=>{t=JSON.parse(t),console.log("JJ config.json:",t),this.dataConfig=t.data.config,this.navDataArr=t.data.mores.remen_game,this.isFinished=!0,e&&e()})}openScene(t,e=!1,a,i){!this.dataConfig.front_all_export_switch&&a&&a.closeCallbackFun?a.closeCallbackFun():!this.dataConfig.front_all_export_switch&&a&&a.continueCallbackFun?a.continueCallbackFun():this.dataConfig.front_all_export_switch&&Laya.Scene.open(t,e,a,Laya.Handler.create(this,t=>{i&&i.addChild(t)}))}closeScene(t){Laya.Scene.close(t)}NavigateApp(t,e,a){Laya.Browser.onWeiXin&&!this.isNavigating&&(this.isNavigating=!0,l.aldEvent("导出总点击数"),Laya.Browser.window.wx.navigateToMiniProgram({appId:this.navDataArr[t].appid,path:this.navDataArr[t].path,success:e=>{this.isNavigating=!1,a&&a(),l.aldEvent("导出成功-总用户数"),l.aldEvent("导出成功-"+this.getTitle(t,!1))},fail:t=>{this.isNavigating=!1,e&&e()}}))}getTitle(t,e=!0){return e&&this.navDataArr[t].subtitle||this.navDataArr[t].title}}class s{constructor(){this.path="",this.picCount=3,this.preT=0,this.shareTips=["请分享到活跃的群！","请分享到不同群！","请分享给好友！","请分享给20人以上的群！"]}static get instance(){return this._instance||(this._instance=new s),this._instance}initShare(){if(Laya.Browser.onWeiXin){Laya.Browser.window.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});let t=n.instance.dataConfig.front_share_config.image,e=n.instance.dataConfig.front_share_config.title;Laya.Browser.window.wx.onShareAppMessage(function(a){return{title:e,imageUrl:t}}),Laya.Browser.window.wx.onShow(t=>{if(l.shareCallback){if(console.log("share!!!"),r.instance.adCloseCallback&&r.instance.adCloseCallback(),((new Date).getTime()-l.shareTime)/1e3>=3&&!l.firstShare){l.shareCallback(),Laya.Browser.window.wx.showToast({title:"分享成功",icon:"none",duration:2e3}),l.front_share_number--;let t=parseInt(localStorage.getItem("front_share_number"));t--,localStorage.setItem("front_share_number",t.toString()),l.shareCallback=null}else l.firstShare=!1,Laya.Browser.window.wx.showModal({title:"提示",content:this.shareTips[Math.floor(Math.random()*this.shareTips.length)],confirmText:"重新分享",success(t){t.confirm?(console.log("用户点击确定"),s.instance.shareGame(l.shareCallback)):t.cancel&&console.log("用户点击取消")}})}})}}shareGame(t){if(l.front_share_number<=0&&!r.instance.videoIsError)return void r.instance.showVideo(t);if(l.shareCallback=t,!Laya.Browser.onWeiXin)return void t();l.shareTime=(new Date).getTime();let e=n.instance.dataConfig.front_share_config.image,a=n.instance.dataConfig.front_share_config.title;Laya.Browser.window.wx.shareAppMessage({title:a,imageUrl:e})}}class r{constructor(){this.bannerUnitId=["adunit-92e98b7e5de0d1d4","adunit-83cb1985411aee2c"],this.videoUnitId="adunit-6500db342ddd249b",this.bannerAd=null,this.videoAd=null,this.videoCallback=null,this.adCloseCallback=null,this.curBannerId=0,this.showBannerCount=0,this.videoIsError=!0,this.videoLoaded=!1,this.isBannerError=!0}static get instance(){return this._instance||(this._instance=new r),this._instance}initAd(){Laya.Browser.onWeiXin&&(this.initBanner(),this.initVideo())}initBanner(){this.isBannerError=!1;let t=!1;Laya.Browser.onWeiXin&&Laya.Browser.window.wx.getSystemInfo({success:e=>{-1!=e.model.search("iPhone X")&&(t=!0)}});let e=Laya.Browser.window.wx.getSystemInfoSync();this.bannerAd=Laya.Browser.window.wx.createBannerAd({adUnitId:this.bannerUnitId[this.curBannerId],style:{left:0,top:0,width:0,height:300}}),this.bannerAd.onResize(a=>{this.bannerAd.style.top=t?e.windowHeight-this.bannerAd.style.realHeight-10:e.windowHeight-this.bannerAd.style.realHeight,this.bannerAd.style.left=e.windowWidth/2-this.bannerAd.style.realWidth/2}),this.bannerAd.onError(t=>{this.isBannerError=!0,console.log("banner error:",JSON.stringify(t))})}hideBanner(t=!0){Laya.Browser.onWeiXin?this.isBannerError?n.instance.closeScene(i.SCENE_SCROLLUI):(this.bannerAd.hide(),null!=n.instance.dataConfig&&this.showBannerCount>=parseInt(n.instance.dataConfig.front_banner_number)&&t&&(this.showBannerCount=0,this.curBannerId++,this.curBannerId>=this.bannerUnitId.length&&(this.curBannerId=0),console.log("destroy banner"),this.bannerAd.destroy(),this.bannerAd=null,this.initBanner())):n.instance.closeScene(i.SCENE_SCROLLUI)}showBanner(t=!1){Laya.Browser.onWeiXin?(this.showBannerCount++,this.isBannerError&&!l.isKillBossUI?n.instance.openScene(i.SCENE_SCROLLUI,!1):(t?(this.bannerAd.style.width=750,this.bannerAd.style.height=300):(this.bannerAd.style.width=0,this.bannerAd.style.height=300),this.bannerAd.show())):n.instance.openScene(i.SCENE_SCROLLUI,!1)}destroyBanner(){Laya.Browser.onWeiXin&&this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)}initVideo(){Laya.Browser.onWeiXin&&(this.videoAd||(this.videoAd=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:this.videoUnitId})),this.loadVideo(),this.videoAd.onLoad(()=>{console.log("激励视频加载成功"),this.videoLoaded=!0}),this.videoAd.onError(t=>{console.log("video Error:",JSON.stringify(t)),this.videoIsError=!0}))}loadVideo(){Laya.Browser.onWeiXin&&null!=this.videoAd&&(this.videoIsError=!1,this.videoAd.load())}showVideo(t){return this.videoCallback=t,Laya.Browser.onWeiXin?this.videoIsError?(s.instance.shareGame(t),void this.loadVideo()):void(0!=this.videoLoaded?(this.videoAd&&this.videoAd.offClose(),Laya.SoundManager.muted=!0,this.videoAd.onClose(t=>{t&&t.isEnded||void 0===t?(console.log("正常播放结束，可以下发游戏奖励"),this.videoCallback()):console.log("播放中途退出，不下发游戏奖励"),this.adCloseCallback&&this.adCloseCallback(),this.adCloseCallback=null,Laya.SoundManager.muted=!1,this.videoLoaded=!1,this.loadVideo()}),this.videoAd.show()):l.OpenAlert("视频正在加载中！")):(this.videoCallback(),this.adCloseCallback&&this.adCloseCallback(),void(this.adCloseCallback=null))}}class o{static calcDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static getWorldDis(t,e){let a=t.transform.position.clone(),i=e.transform.position.clone();return Laya.Vector3.distance(a,i)}static getDirectionAToB(t,e,a=!0){let i=t.transform.position.clone(),n=e.transform.position.clone(),s=new Laya.Vector3(0,0,0);return Laya.Vector3.subtract(n,i,s),a&&Laya.Vector3.normalize(s,s),s}static fixPosY(t,e=1334){return t*Laya.stage.displayHeight/e}static findNodeByName(t,e){let a=null,i=t=>{for(let n=0;n<t.numChildren;n++){if(t.getChildAt(n).name==e)return void(a=t.getChildAt(n));i(t.getChildAt(n))}};return i(t),a}static TmoveTo(t,e,a,i,n){if(!t.transform)return;let s=new Laya.Tween;var r=t.transform.position;s.to(t.transform.position,{x:a.x,y:a.y,z:a.z,update:new Laya.Handler(this,()=>{t.transform&&(t.transform.position=r)})},e,n,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToYZ(t,e,a,i,n){if(!t.transform)return;let s=new Laya.Tween;var r=t.transform.position;s.to(t.transform.position,{y:a.y,z:a.z,update:new Laya.Handler(this,()=>{t.transform&&(t.transform.position=r)})},e,null,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToX(t,e,a,i,n){if(!t.transform)return;let s=new Laya.Tween;var r=t.transform.localPosition;s.to(t.transform.localPosition,{x:a.x,update:new Laya.Handler(this,()=>{t.transform&&(t.transform.localPosition=r)})},e,null,Laya.Handler.create(this,()=>{i&&i()}))}static RotateTo(t,e,a,i){var n=t.transform.localRotationEuler;Laya.Tween.to(t.transform.localRotationEuler,{x:a.x,y:a.y,z:a.z,update:new Laya.Handler(this,function(){t&&(t.transform.localRotationEuler=n)})},e,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){i&&i()}))}static tMove2D(t,e,a,i,n){Laya.Tween.to(t,{x:e,y:a},i,null,new Laya.Handler(this,()=>{n&&n()}))}static scaleTo2D(t,e,a,i){Laya.Tween.to(t,{scaleX:e,scaleY:e},a,null,new Laya.Handler(this,()=>{i&&i()}))}static alphaTo2D(t,e,a,i){Laya.Tween.to(t,{alpha:e},a,null,new Laya.Handler(this,()=>{i&&i()}))}static updateNumber(t,e,a,i=!0,n,s){let r=t*e,o=Math.floor((r-t)/60);o=o<=0?1:o;let l=()=>{n?((t+=o)>=r&&(t=r,s&&s(),Laya.timer.clear(this,l)),i?a.text=t.toString():a.value=t.toString()):((r-=o)<=t&&(r=t,s&&s(),Laya.timer.clear(this,l)),i?a.text=r.toString():a.value=r.toString())};Laya.timer.frameLoop(1,this,l)}static loadJson(t,e){Laya.loader.load(t,Laya.Handler.create(this,e),null,Laya.Loader.JSON)}static objectShake(t,e=1,a=.7){var i=e,n=1,s=t.transform.localPosition.clone();Laya.timer.frameLoop(1,this,function updateShake(){if(i>0){var e=new Laya.Vector3;Laya.Vector3.scale((r=Math.random()>.5?Math.random():-Math.random(),o=Math.random()>.5?Math.random():-Math.random(),new Laya.Vector3(r,o,0)),a,e),Laya.Vector3.add(s,e,e),t.transform.localPosition=e,i-=.02*n}else i=0,t.transform.localPosition=s,Laya.timer.clear(this,updateShake);var r,o})}static getRandomItemInArr(t){return t[Math.floor(Math.random()*t.length)]}static shuffleArr(t){let e=t.length;for(;e;){let a=Math.floor(Math.random()*e--);[t[a],t[e]]=[t[e],t[a]]}return t}static GetRandom(t,e,a=!0){let i=e-t,n=Math.random()*i+1;return n+=t,a?Math.floor(n):n}static coinCollectAnim(t,e,a,i=10,n){let s=i;for(var r=0;r<i;r++){let i=Laya.Pool.getItemByClass("coin",Laya.Image);i.skin="startUI/zy_zs_1.png",i.x=t.x,i.y=t.y,a.addChild(i);let r=300+100*Math.random()-50;Laya.Tween.to(i,{x:i.x+250*Math.random()-125,y:i.y+250*Math.random()-125},r),Laya.timer.once(r+50,this,function(){Laya.Tween.to(i,{x:e.x,y:e.y},400,null,new Laya.Handler(this,function(){a.removeChild(i),Laya.Pool.recover("coin",i),0==--s&&n&&n()}))})}}static scaleLoop(t,e,a){Laya.Tween.to(t,{scaleX:e,scaleY:e},a,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{scaleX:1,scaleY:1},a,null,new Laya.Handler(this,()=>{this.scaleLoop(t,e,a)}))}))}static rotateLoop(t,e,a){Laya.Tween.to(t,{rotation:e},a,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{rotation:-e},2*a,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{rotation:0},a,null,new Laya.Handler(this,()=>{this.rotateLoop(t,e,a)}))}))}))}static visibleDelay(t,e){t.visible=!1,Laya.timer.once(e,this,()=>{t.visible=!0})}static pointInPolygon(t,e){for(var a=t.x,i=t.y,n=!1,s=0,r=e.length-1;s<e.length;r=s++){var o=e[s].x,l=e[s].y,h=e[r].x,c=e[r].y;l>i!=c>i&&a<(h-o)*(i-l)/(c-l)+o&&(n=!n)}return n}static getSprite3DResByUrl(t,e){let a=Laya.loader.getRes(l.UnityPath+t);return Laya.Sprite3D.instantiate(a,e,!1,new Laya.Vector3(0,0,0))}static getRandomItemInArrWithoutSelf(t,e,a=1){let i=[].concat(e);return i.splice(i.indexOf(t),1),(i=this.shuffleArr(i)).slice(0,a)}static getBoundBox(t){let e=t.getComponent(Laya.PhysicsCollider).colliderShape,a=t.transform.position.clone();a.x+=e.localOffset.x,a.y+=e.localOffset.y,a.z+=e.localOffset.z;let i=new Laya.Vector3(a.x-e.sizeX/2,a.y-e.sizeY/2,a.z-e.sizeZ/2),n=new Laya.Vector3(a.x+e.sizeX/2,a.y+e.sizeY/2,a.z+e.sizeZ/2);return new Laya.BoundBox(i,n)}static getBoundBoxWithMinMax(t,e){return new Laya.BoundBox(t,e)}}class l{static LoginWx(t){if(!Laya.Browser.onWeiXin)return;let e=Laya.Browser.window.wx.getLaunchOptionsSync();Laya.Browser.window.wx.login({success(a){a.code&&(console.log("res.code:",a.code),t&&t(a.code,e.query))}})}static checkScope(t){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.getSetting({success:e=>{e.authSetting["scope.userInfo"]?console.log("已经授权"):(console.log("没有授权"),this.createScope(t))}})}static createScope(t){this.scopeBtn=Laya.Browser.window.wx.createUserInfoButton({type:"text",text:"",style:{left:t.x,top:t.y,width:t.width,height:t.height,lineHeight:40,backgroundColor:"#ffffff",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:0}}),this.scopeBtn.onTap(t=>{"getUserInfo:ok"==t.errMsg?(this.scopeBtn.destroy(),this.scopeBtn=null):"getUserInfo:fail auth deny"==t.errMsg&&(this.scopeBtn.destroy(),this.scopeBtn=null)})}static GetLaunchParam(t){Laya.Browser.onWeiXin&&(this.OnShowFun=t,t(this.GetLaunchPassVar()),Laya.Browser.window.wx.onShow(t=>{null!=this.OnShowFun&&this.OnShowFun(t),console.log("wx on show")}))}static GetLaunchPassVar(){return Laya.Browser.onWeiXin?Laya.Browser.window.wx.getLaunchOptionsSync():null}static WxOnHide(t){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onHide(t)}static WxOffHide(t){t&&Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offHide(t)}static httpRequest(t,e,a="get",i){var n=new Laya.HttpRequest;n.http.timeout=5e3,n.once(Laya.Event.COMPLETE,this,i),n.once(Laya.Event.ERROR,this,this.httpRequest,[t,e,a,i]),"get"==a?n.send(t+"?"+e,"",a,"text"):"post"==a&&n.send(t,JSON.stringify(e),a,"text")}static DoVibrate(t=!0){Laya.Browser.onWeiXin&&this.isVibrate&&(t?Laya.Browser.window.wx.vibrateShort():Laya.Browser.window.wx.vibrateLong())}static OpenAlert(t,e=2e3,a=!1){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.showToast({title:t,duration:e,mask:!1,icon:a?"success":"none"})}static NavigateApp(t,e,a,i,n){if(Laya.Browser.onWeiXin){Laya.Browser.window.wx.navigateToMiniProgram({appId:t,path:e,success(t){console.log("打开成功"),n()},fail(t){console.log("打开失败"),i()}})}}static preViewImage(t){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.previewImage({current:t,urls:[t]})}static aldEvent(t){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.aldSendEvent(t)}static fixBtnTouchPos(t,e,a,i,s,l){this.isValidBanner()?(t.y=e,Laya.timer.once(n.instance.dataConfig.front_banner_showtime,i,()=>{r.instance.showBanner()}),Laya.timer.once(n.instance.dataConfig.front_banner_showtime+n.instance.dataConfig.front_button_moveup,i,()=>{o.tMove2D(t,t.x,a,1e3),s&&s()})):(t.y=l?a:e,l&&r.instance.showBanner(),s&&s())}static isValidBanner(){return e.getPlayerData().grade>=n.instance.dataConfig.front_pass_gate&&1==n.instance.dataConfig.is_allow_area&&this.allowScene()}static allowScene(){let t=n.instance.dataConfig.front_wuchu_scene.toString();if(-1==t.search("|")){return parseInt(t)==l.sceneId}let e=t.split("|");for(let t=0;t<e.length;t++){if(parseInt(e[t])==l.sceneId)return!0}return!1}static bannerWuChu2(){if(clearTimeout(this.bannerTO2),r.instance.hideBanner(),l.isValidBanner()){let t=n.instance.dataConfig.front_export_banner_appear,e=t+n.instance.dataConfig.front_export_banner_hide;this.bannerTO2=setTimeout(()=>{r.instance.showBanner(),this.bannerTO2=setTimeout(()=>{r.instance.hideBanner()},e)},t)}else r.instance.hideBanner()}static bannerWuChu1(){if(clearTimeout(this.bannerTO1),r.instance.hideBanner(),l.isValidBanner()){let t=n.instance.dataConfig.front_baokuan_banner_appear,e=t+n.instance.dataConfig.front_baokuan_banner_hide;this.bannerTO1=setTimeout(()=>{r.instance.showBanner(),this.bannerTO1=setTimeout(()=>{r.instance.hideBanner()},e)},t)}else r.instance.hideBanner()}static splitSection(){let t=n.instance.dataConfig.front_water_section.toString();if(-1==t.search("|")){return[parseInt(t)]}let e=t.split("|"),a=[];for(let t=0;t<e.length;t++){let i=parseInt(e[t]);a.push(i)}return a}static getIsExportValid(){return n.instance.dataConfig.front_all_export_switch}static calculateShareNumber(){localStorage.getItem("lastDate")&&(new Date).getDate()==parseInt(localStorage.getItem("lastDate"))?this.front_share_number=parseInt(localStorage.getItem("front_share_number")):this.front_share_number=n.instance.dataConfig.front_banner_number,console.log("this.front_share_number:",this.front_share_number)}}l.UnityPath="LayaScene_SampleScene/Conventional/",l.openId="",l.version="1.0.0",l.isVibrate=!0,l.isMusic=!0,l.OnShowFun=null,l.scopeBtn=null,l.shareCallback=null,l.front_share_number=0,l.sceneId=0,l.gotOfflineBounes=!1,l.configData=null,l.shareTime=0,l.firstShare=!0,l.hadShowFriendUI=!1,l.launchGameUI=!1,l.firstStartGame=!1,l.isKillBossUI=!1,l.fromKillBossUI=!1,l.killbossCallback=null,l.tempGrade=1,l.bannerTO2=-1,l.bannerTO1=-1;class h{constructor(){this.effectArr=[]}static get instance(){return this._instance||(this._instance=new h),this._instance}initLoading(t){var e=[{url:"res/Sounds/Bgm.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/Bar.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/Buy.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/Click.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/Ground.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/Jewel.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/Longer.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/Run.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/Shorter.mp3",type:Laya.Loader.SOUND}];Laya.loader.load(e,Laya.Handler.create(this,t)),Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1)}playMusic(t,e=0,a){Laya.SoundManager.playMusic("res/Sounds/"+t,e,new Laya.Handler(this,a))}stopMusic(){Laya.SoundManager.stopMusic()}playSoundEffect(t,e=1,a){return Laya.SoundManager.playSound("res/Sounds/"+t,e,new Laya.Handler(this,a))}stopSound(t){Laya.SoundManager.stopSound("res/Sounds/"+t)}}class c extends Laya.Script{constructor(){super(),this.myOwner=null,this._ani=null,this.isDied=!1,this.speed=.25,this.roadEdge=11,this.trail1=null,this.trail2=null,this.trail3=null,this.trail4=null,this.trail5=null,this.trail6=null,this.LandFX=null,this.SpeedFX=null}onEnable(){this.myOwner=this.owner,this._ani=this.owner.getComponent(Laya.Animator),this.myOwner.transform.rotate(new Laya.Vector3(0,-90,0),!0,!1);let t=this.getMyPos();t.x-=1,this.myOwner.transform.position=t,this.trail1=this.myOwner.getChildByName("Trail1"),this.trail2=this.myOwner.getChildByName("Trail2"),this.trail3=this.myOwner.getChildByName("Trail3"),this.trail4=this.myOwner.getChildByName("Trail4"),this.trail5=this.myOwner.getChildByName("Trail5"),this.trail6=this.myOwner.getChildByName("Trail6"),this.LandFX=this.myOwner.getChildByName("LandFX"),this.SpeedFX=this.myOwner.getChildByName("SpeedFX");for(let t=1;t<=6;t++)this["trail"+t].active=t-1==e.getPlayerData().msId;this.LandFX.active=!1,this.SpeedFX.active=!1,this.playIdle(),this.changeSkin(e.getPlayerData().skinId)}onDisable(){}refreshTrail(){for(let t=1;t<=6;t++)this["trail"+t].active=t-1==e.getPlayerData().msId}getMyPos(){return this.myOwner.transform.position.clone()}playIdle(){this.SpeedFX.active=!1,this._ani.speed=1,"idle"!=this._ani.getControllerLayer().getCurrentPlayState().animatorState.name&&(h.instance.stopSound("Run.mp3"),this._ani.play("idle"))}playRun(t){if(this.SpeedFX.active=!0,this._ani.speed=1.5,"run"!=this._ani.getControllerLayer().getCurrentPlayState().animatorState.name){if(h.instance.playSoundEffect("Run.mp3",0),t){let t=this.getMyPos();t.x=0,this.myOwner.transform.position=t,this.myOwner.transform.rotate(new Laya.Vector3(0,90,0),!0,!1)}this._ani.play("run")}}playHang(){this._ani.speed=1,"hang"!=this._ani.getControllerLayer().getCurrentPlayState().animatorState.name&&(h.instance.stopSound("Run.mp3"),this._ani.play("hang"))}playFall(){this.SpeedFX.active=!1,this._ani.speed=1,"fall"!=this._ani.getControllerLayer().getCurrentPlayState().animatorState.name&&(h.instance.stopSound("Run.mp3"),this._ani.play("fall"))}playDie(){this.SpeedFX.active=!1,this._ani.speed=1,"die"!=this._ani.getControllerLayer().getCurrentPlayState().animatorState.name&&(h.instance.stopSound("Run.mp3"),this._ani.play("die"))}playDance(){this.SpeedFX.active=!1,this._ani.speed=1,"dance"!=this._ani.getControllerLayer().getCurrentPlayState().animatorState.name&&(h.instance.stopSound("Run.mp3"),this._ani.play("dance"))}activeLandFX(){this.LandFX.active=!0,this.LandFX.particleSystem.play(),Laya.timer.once(1e3,this,()=>{this.LandFX.active=!1})}moveX(t){if(L.Share.isGameOver||this.isDied)return;if(this.myOwner.transform.position.x+t>this.roadEdge)return void(this.myOwner.transform.position=new Laya.Vector3(this.roadEdge,this.myOwner.transform.position.clone().y,this.myOwner.transform.position.clone().z));if(this.myOwner.transform.position.x+t<-this.roadEdge)return void(this.myOwner.transform.position=new Laya.Vector3(-this.roadEdge,this.myOwner.transform.position.clone().y,this.myOwner.transform.position.clone().z));let e=new Laya.Vector3(t,0,0);this.myOwner.transform.translate(e,!1),L.Share._camera.transform.translate(e,!1)}checkMyCollision(){for(let t=0;t<L.Share._collisionArr.length;t++){let e=L.Share._collisionArr[t];if(e==this.myOwner)continue;let a=o.getBoundBox(this.myOwner),i=o.getBoundBox(e);if(Laya.CollisionUtils.intersectsBoxAndBox(a,i)){if(-1!=e.name.search("FallArea"))return void L.Share.loseCB(!0);if(-1!=e.name.search("SlideArea")&&"hang"!=this._ani.getControllerLayer().getCurrentPlayState().animatorState.name)this.myOwner.transform.translate(new Laya.Vector3(0,-.5,0),!1),this.playHang(),h.instance.playSoundEffect("Bar.mp3");else if(-1!=e.name.search("ExitArea"))return L.Share._barArr[0].getChildByName("SparkFX1").active=!1,L.Share._barArr[0].getChildByName("SparkFX2").active=!1,L.Share.moveToDes(),this._ani.speed=0,e.removeSelf(),void L.Share._collisionArr.splice(L.Share._collisionArr.indexOf(e),1)}}}onUpdate(){if(L.Share.isStartGame&&!L.Share.isGameOver&&!L.Share.isPause)if(this.myOwner.transform.position.z>=L.Share.totalDistance)L.Share.winCB();else{if("hang"==this._ani.getControllerLayer().getCurrentPlayState().animatorState.name&&!L.Share.isFlying){if(L.Share._poleCrl.max.transform.position.x<L.Share._barArr[0].transform.position.x+2.5||L.Share._poleCrl.min.transform.position.x>L.Share._barArr[0].transform.position.x-2.5)return L.Share._barArr[0].getChildByName("SparkFX1").active=!1,L.Share._barArr[0].getChildByName("SparkFX2").active=!1,void L.Share.loseCB(!0);L.Share._barArr[0].getChildByName("SparkFX1").active=!0,L.Share._barArr[0].getChildByName("SparkFX2").active=!0;let t=L.Share._barArr[0].getChildByName("SparkFX1").transform.position.clone();t.z=this.myOwner.transform.position.z+1.5;let e=L.Share._barArr[0].getChildByName("SparkFX2").transform.position.clone();e.z=this.myOwner.transform.position.z+1.5,L.Share._barArr[0].getChildByName("SparkFX1").transform.position=t,L.Share._barArr[0].getChildByName("SparkFX2").transform.position=e}if(L.Share.isFlying){let t=new Laya.Vector3(0,0,0);Laya.Vector3.add(this.myOwner.transform.position.clone(),L.Share.camStartPos,t),L.Share._camera.transform.position=t}else{let t=new Laya.Vector3(0,0,this.speed);this.myOwner.transform.translate(t,!1),L.Share._camera.transform.translate(t,!1)}this.checkMyCollision();for(let t=0;t<L.Share._collisionArr.length;t++){let e=L.Share._collisionArr[t];if(-1!=e.name.search("Wall")||-1!=e.name.search("Saw")){let t=o.getBoundBox(this.myOwner),a=o.getBoundBox(e);if(Laya.CollisionUtils.intersectsBoxAndBox(t,a))return void L.Share.loseCB(!1)}}}}changeSkin(t){let e=new Laya.UnlitMaterial;Laya.Texture2D.load("res/skinRes/Hero_0"+(t+1)+".png",Laya.Handler.create(this,t=>{e.albedoTexture=t}));for(let t=0;t<1;t++){this.owner.getChildAt(t).skinnedMeshRenderer.material=e}}}class d extends Laya.Scene{constructor(){super(),this.touchStartX=0,this.touchPreX=0,this.touching=!1,this.canShowTips=!0}onOpened(){d.Share=this,this.gradeNum.text=e.getPlayerData().grade.toString(),this.curGrade.text=e.getPlayerData().grade.toString(),this.touchBtn.on(Laya.Event.MOUSE_DOWN,this,this.touchBtnDownCB),this.touchBtn.on(Laya.Event.MOUSE_MOVE,this,this.touchBtnMoveCB),this.touchBtn.on(Laya.Event.MOUSE_UP,this,this.touchBtnUpCB),this.touchBtn.on(Laya.Event.MOUSE_OUT,this,this.touchBtnUpCB),Laya.timer.frameLoop(1,this,this.updateCB)}onClosed(){Laya.timer.clearAll(this)}touchBtnDownCB(t){L.Share.isStartGame||(L.Share.isStartGame=!0,this.guideAni.visible=!1,L.Share._playerCrl._ani.speed=1.5,L.Share._playerCrl.SpeedFX.active=!0),!L.Share.isGameOver&&L.Share.isStartGame&&(this.touching=!0,this.touchStartX=t.stageX,this.touchPreX=t.stageX)}touchBtnMoveCB(t){if(!this.touching||L.Share.isGameOver||!L.Share.isStartGame)return;let e=t.stageX,a=this.touchPreX-e;this.touchStartX;L.Share._playerCrl.moveX(a/20),this.touchPreX=e}touchBtnUpCB(t){this.touching&&!L.Share.isGameOver&&L.Share.isStartGame&&(this.touching=!1)}updateCB(){this.gBar.value=L.Share._player.transform.position.z/L.Share.totalDistance,this.coinNum.value=e.getPlayerData().coin.toString()}fixJewelIcon(t){let e=new Laya.Vector4(0,0,0),a=t.transform.position.clone();a.y+=1,L.Share._camera.viewport.project(a,L.Share._camera.projectionViewMatrix,e);let i=new Laya.Image("startUI/zy_zs_1.png");i.anchorX=.5,i.anchorY=.5,i.pos(e.x/Laya.stage.clientScaleX,e.y/Laya.stage.clientScaleY),this.addChild(i),o.tMove2D(i,60,80,1e3,()=>{i.removeSelf()})}fixAddScore(){let t=new Laya.Vector4(0,0,0),e=L.Share._player.transform.position.clone();e.y+=1,e.z+=2,L.Share._camera.viewport.project(e,L.Share._camera.projectionViewMatrix,t);let a=new Laya.Image("gameUI/yxz_jy_1.png");a.anchorX=.5,a.anchorY=.5,a.pos(t.x/Laya.stage.clientScaleX,t.y/Laya.stage.clientScaleY),this.addChild(a),o.tMove2D(a,a.x,a.y-50,500,()=>{a.removeSelf()})}showTips(t){if(!this.canShowTips)return;this.canShowTips=!1,Laya.timer.once(2e3,this,()=>{this.canShowTips=!0});let e="";switch(t){case 1:e="Die"+o.GetRandom(1,3)+".png";break;case 2:e="Short"+o.GetRandom(1,3)+".png";break;case 3:e="Longer"+o.GetRandom(1,3)+".png";break;case 4:e="Jewel"+o.GetRandom(1,3)+".png"}let a=new Laya.Image("gameUI/"+e);a.anchorX=.5,a.anchorY=.5,a.pos(375,400),this.addChild(a),o.scaleTo2D(a,1.3,500,()=>{o.scaleTo2D(a,1,500,()=>{o.alphaTo2D(a,0,1e3,()=>{a.removeSelf()})})})}initNav(){let t=Math.floor(Math.random()*n.instance.navDataArr.length);this.navNode.getChildByName("icon").skin=n.instance.navDataArr[t].icon,this.navNode.off(Laya.Event.CLICK,this,this.navCB),this.navNode.on(Laya.Event.CLICK,this,this.navCB,[t])}navCB(t){console.log("click id:",t),L.Share.isPause=!0,l.aldEvent("游戏内导出位—总点击数"),n.instance.NavigateApp(t,()=>{n.instance.openScene(i.SCENE_FULLGAMEUI,!1,{continueCallbackFun:()=>{n.instance.dataConfig.front_main_banner_switch&&l.isValidBanner()&&r.instance.showBanner(),L.Share.isPause=!1}})},()=>{l.aldEvent("游戏内导出位-总成功跳转数"),L.Share.isPause=!1})}}class y extends Laya.Script{constructor(){super(),this.myOwner=null,this.coll=null,this.min=null,this.max=null,this.canColl=!0}onEnable(){this.myOwner=this.owner,this.myOwner.transform.localScale=new Laya.Vector3(5,1,1),this.max=this.myOwner.getChildByName("min"),this.min=this.myOwner.getChildByName("max")}getMyBound(){return new Laya.BoundBox(this.min.transform.position.clone(),this.max.transform.position.clone())}onDisable(){}scalePole(t){l.DoVibrate(!1),t>0?(h.instance.playSoundEffect("Longer.mp3"),d.Share.showTips(3)):t<0&&(h.instance.playSoundEffect("Shorter.mp3"),d.Share.showTips(2)),this.myOwner.transform.localScale=new Laya.Vector3(this.myOwner.transform.localScaleX+t,1,1)}movePole(t){let e=this.myOwner.transform.localPosition.clone();e.x+=t,this.myOwner.transform.localPosition=e}checkCollision(){if(this.canColl)for(let t=0;t<L.Share._collisionArr.length;t++){let e=L.Share._collisionArr[t];if(e===this.myOwner||!this.canColl)continue;let a=this.getMyBound(),i=o.getBoundBox(e);if(Laya.CollisionUtils.intersectsBoxAndBox(a,i)&&(-1!=e.name.search("Wall")||-1!=e.name.search("Saw"))){let t=0,a=!0;e.transform.position.x>this.myOwner.transform.position.x?t=this.max.transform.position.x-e.getChildByName("max").transform.position.x:e.transform.position.x<this.myOwner.transform.position.x&&(t=e.getChildByName("min").transform.position.x-this.min.transform.position.x,a=!1),this.scalePole(-t),this.movePole(a?-t/2:t/2),Laya.timer.once(300,this,()=>{let t=this.myOwner.transform.localPosition.clone();t.x=0,o.TmoveToX(this.myOwner,100,t,()=>{this.canColl=!0})});let i=o.getSprite3DResByUrl("Pole_01.lh",L.Share._levelNode),n=this.myOwner.transform.position.clone();i.transform.localScale=new Laya.Vector3(t,1,1),n.x=a?this.max.transform.position.x+t/2:this.min.transform.position.x-t/2,n.z-=.2,i.transform.position=n;let s=n.clone();s.y-=.8,o.TmoveTo(i,1e3,s,null)}}}onUpdate(){!L.Share.isGameOver&&L.Share.isStartGame&&this.checkCollision()}}class m extends Laya.Script{constructor(){super(),this.myOwner=null}onEnable(){this.myOwner=this.owner}onDisable(){}onUpdate(){if(!L.Share.isStartGame||L.Share.isGameOver)return;let t=o.getBoundBox(this.myOwner.getChildAt(0)),e=L.Share._poleCrl.getMyBound();Laya.CollisionUtils.intersectsBoxAndBox(t,e)&&(L.Share._poleCrl.scalePole(1),d.Share.fixAddScore(),this.myOwner.destroy())}}class u extends Laya.Script{constructor(){super(),this.myOwner=null,this.myId=0,this.randX=0,this.havaRandX=!1,this.isDie=!1}onEnable(){this.myOwner=this.owner,this.randX=.3*Math.random()-.15}onDisable(){}onUpdate(){if(!L.Share.isStartGame||L.Share.isGameOver||this.isDie)return;if(this.myOwner.transform.position.z>=L.Share.totalDistance)return d.Share.fixJewelIcon(this.myOwner),l.DoVibrate(!1),this.isDie=!0,this.myOwner.transform.translate(new Laya.Vector3(0,0,1e3)),L.Share._score++,void L.Share.setScorePlane();let t=this.myId>=10,e=null;if(t&&(e=L.Share._boxNode.getChildAt(this.myId-10)),Math.abs(this.myOwner.transform.position.z-L.Share._pole.transform.position.z)<=.6){if(this.myOwner.transform.position.x+.5<=L.Share._poleCrl.max.transform.position.x&&this.myOwner.transform.position.x+.5>=L.Share._poleCrl.min.transform.position.x||this.myOwner.transform.position.x-.5<=L.Share._poleCrl.max.transform.position.x&&this.myOwner.transform.position.x-.5>=L.Share._poleCrl.min.transform.position.x){let t=new Laya.Vector3(0,0,L.Share._playerCrl.speed);this.myOwner.transform.translate(t,!1)}}else if(t&&e&&Math.abs(this.myOwner.transform.position.z-e.transform.position.z)<=.9){let t=this.myOwner.transform.position.clone();if(this.havaRandX){var a=t.clone();a.x=this.randX,Laya.Vector3.lerp(t,a,.2,t),this.myOwner.transform.position=t}else this.randX=t.x+this.randX,this.havaRandX=!0;let e=new Laya.Vector3(0,0,L.Share._playerCrl.speed);this.myOwner.transform.translate(e,!1)}}}class p extends Laya.Script{constructor(){super(),this.myOwner=null}onEnable(){this.myOwner=this.owner}onDisable(){}onUpdate(){if(!L.Share.isStartGame||L.Share.isGameOver)return;let t=o.getBoundBox(this.myOwner),e=L.Share._poleCrl.getMyBound();Laya.CollisionUtils.intersectsBoxAndBox(t,e)&&(l.DoVibrate(!1),d.Share.showTips(4),h.instance.playSoundEffect("Jewel.mp3"),L.Share._coinCount++,d.Share.fixJewelIcon(this.myOwner),this.myOwner.destroy())}}class L{constructor(){this.camStartPos=new Laya.Vector3(0,0,0),this.camStartRotation=null,this.lightStartForward=null,this.planePos=null,this._levelNode=null,this._roadNode=null,this._buildingNode=null,this._player=null,this._playerCrl=null,this._pole=null,this._poleCrl=null,this._collisionArr=[],this._desArr=[],this._barArr=[],this._boxNode=null,this._finish=null,this._scorePlane=null,this._coinCount=0,this._score=0,this.totalDistance=0,this.isDes=!1,this.startCamField=80,this.isFlying=!1,this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.isPause=!1,this.maxPlaneCount=2,this.mat=null,this.cav=null,this.cxt=null,this.texture2D=null,this.destroyBoxArr=[],L.Share=this,e.getPlayerData(),n.instance.initJJ(l.version,()=>{s.instance.initShare(),Laya.Browser.onWeiXin&&(l.sceneId=l.GetLaunchPassVar().scene,console.log("sceneId:",l.sceneId)),l.calculateShareNumber(),h.instance.initLoading(()=>{Laya.Scene.open("MyScenes/LoadingUI.scene")})}),l.WxOnHide(()=>{e.setExitTime(),localStorage.setItem("lastDate",(new Date).getDate().toString()),localStorage.setItem("front_share_number",l.front_share_number.toString())}),Laya.timer.frameLoop(1,this,this.activeRoad)}initScene(){Laya.Scene3D.load(l.UnityPath+"SampleScene.ls",Laya.Handler.create(this,this.onLoadScene))}onLoadScene(t){Laya.Scene.open("MyScenes/StartUI.scene"),l.aldEvent("进入首页"),this._scene=Laya.stage.addChild(t),Laya.stage.setChildIndex(this._scene,0),this._camera=this._scene.getChildByName("Main Camera"),this._light=this._scene.getChildByName("Directional Light"),this.camStartPos=this._camera.transform.position.clone(),this.camStartRotation=this._camera.transform.rotation.clone(),this._camera.fieldOfView=this.startCamField,this._levelNode=new Laya.Sprite3D,this._scene.addChild(this._levelNode),this.createLevel(),this.setFog(),Laya.timer.frameLoop(1,this,this.fixCameraField),Laya.timer.frameLoop(1,this,this.destroyBox)}fixCameraField(){this._pole&&this.isStartGame&&!this.isGameOver?this._camera.fieldOfView<this.startCamField+this._pole.transform.localScaleX+5?this._camera.fieldOfView+=.1:this._camera.fieldOfView>this.startCamField+this._pole.transform.localScaleX+5&&(this._camera.fieldOfView-=.1):this.isGameOver&&(this._camera.fieldOfView<this.startCamField?this._camera.fieldOfView+=.5:this._camera.fieldOfView>this.startCamField&&(this._camera.fieldOfView-=.5),Math.abs(this._camera.fieldOfView-this.startCamField)<2&&(this._camera.fieldOfView=this.startCamField))}setFog(){let t=this._scene;t.enableFog=!0,t.fogColor=this.getRGB("#F17673"),t.fogStart=0,t.fogRange=400}getRGB(t){var e=[],a=[];let i=t.replace(/#/,"");if(3==i.length){for(var n=[],s=0;s<3;s++)n.push(i.charAt(s)+i.charAt(s));i=n.join("")}for(s=0;s<3;s++)e[s]="0x"+i.substr(2*s,2),a.push(parseInt(e[s]));return new Laya.Vector3(a[0]/255,a[1]/255,a[2]/255)}gameStart(){Laya.Scene.open("MyScenes/GameUI.scene"),this._playerCrl.playRun(!0),this._playerCrl._ani.speed=0,this._playerCrl.SpeedFX.active=!1,this.createPole()}createLevel(){1==e.getPlayerData().grade?this.maxPlaneCount=2:e.getPlayerData().grade<4?this.maxPlaneCount=e.getPlayerData().grade+1:this.maxPlaneCount=4,this._roadNode=this._levelNode.addChild(new Laya.Sprite3D),this._buildingNode=this._levelNode.addChild(new Laya.Sprite3D),this._player=o.getSprite3DResByUrl("Hero_01.lh",this._levelNode),this._playerCrl=this._player.addComponent(c),this._collisionArr.push(this._player);for(let t=0;t<this.maxPlaneCount;t++){let a=o.GetRandom(1,3);0==t&&(a=1);let i="Road_0"+a+".lh";t==this.maxPlaneCount-1&&(i="Road_Finish.lh");let n=o.getSprite3DResByUrl(i,this._roadNode);n.transform.position=new Laya.Vector3(0,-30*t,20+100*t);for(let t=0;t<n.numChildren;t++){let e=n.getChildAt(t);-1!=e.name.search("FallArea")&&this._collisionArr.push(e)}if(t>0&&this._desArr.push(n.getChildByName("Des")),t==this.maxPlaneCount-1&&(this._boxNode=n.getChildByName("BoxNode"),this._finish=n.getChildByName("Finish"),this._scorePlane=n.getChildByName("ScorePlane"),this.initPlane(),this.setScorePlane(),this.totalDistance=this._finish.transform.position.z,this.createBox()),t<this.maxPlaneCount-1){let i=o.getSprite3DResByUrl("Bar_01.lh",n);i.getChildByName("SparkFX1").active=!1,i.getChildByName("SparkFX2").active=!1;let s=n.transform.position.clone();s.y-=.4,s.z+=32.5,i.transform.position=s,this._collisionArr.push(i.getChildAt(0)),this._collisionArr.push(i.getChildAt(1)),this._collisionArr.push(i.getChildAt(2)),this._collisionArr.push(i.getChildAt(3)),this._barArr.push(i);let r=10;(0==t||e.getPlayerData().grade<4)&&(r=5),this.createProp(a,n,r)}}for(let t=0;t<8;t++){o.getSprite3DResByUrl("Building_01.lh",this._buildingNode).transform.position=new Laya.Vector3((t%2==0?150:-150)+o.GetRandom(-50,50),-250,300*t+o.GetRandom(-50,50))}}createProp(t,a,i=10){let n=a.addChild(new Laya.Sprite3D),s=[].concat(e["roadArr"+t])[o.GetRandom(0,i-1)];for(let t=0;t<s.length;t++){let e=s[t].name,a=new Laya.Vector3(Number(s[t].position.x),Number(s[t].position.y),Number(s[t].position.z)),i=new Laya.Vector3(Number(s[t].scale.x),Number(s[t].scale.y),Number(s[t].scale.z));if(-1!=e.search("PropPole"))this.createPropPole(n,a.clone());else if(-1!=e.search("Saw"))this.createSaw(n,a.clone());else if(-1!=e.search("Jewel"))this.createJewel(n,a.clone());else if(-1!=e.search("Wall")){let t=1;-1!=e.search("1")?t=1:-1!=e.search("2")?t=2:-1!=e.search("3")&&(t=3),this.createWall(t,n,a.clone(),i.clone())}}}createPole(){this._pole=o.getSprite3DResByUrl("Pole_01.lh",this._player);let t=this._player.transform.position.clone();t.y+=1.11,t.z+=.64,this._pole.transform.position=t,this._poleCrl=this._pole.addComponent(y)}createBox(){for(let t=0;t<100;t++){let e=o.getSprite3DResByUrl("Box_01.lh",this._boxNode);e.transform.localPosition=new Laya.Vector3(1.5*Math.floor(t%10)-7.5,0,2*Math.floor(t/10)),e.addComponent(u).myId=t}}createPropPole(t,e){let a=o.getSprite3DResByUrl("PropPole.lh",t);e.y=1.11,a.transform.localPosition=e,a.addComponent(m)}createSaw(t,e){let a=o.getSprite3DResByUrl("Saw_01.lh",t);a.transform.localPosition=e,this._collisionArr.push(a)}createJewel(t,e){let a=o.getSprite3DResByUrl("Jewel_01.lh",t);a.transform.localPosition=e,a.addComponent(p)}createWall(t,e,a,i){let n=o.getSprite3DResByUrl("Wall_0"+t+".lh",e);n.transform.localPosition=a,n.transform.localScale=i,this._collisionArr.push(n)}moveToDes(){this.isFlying=!0;let t=this._desArr[0];o.TmoveToYZ(this._player,2e3,t.transform.position.clone(),()=>{this.isGameOver||(h.instance.playSoundEffect("Ground.mp3"),this._playerCrl.activeLandFX(),this.isFlying=!1,this._playerCrl._ani.speed=1,this._playerCrl.playRun(),this._barArr.splice(0,1))}),this._desArr[0].destroy(),this._desArr.splice(0,1)}initPlane(){if(null!=this.mat)return this._scorePlane.meshRenderer.sharedMaterial=this.mat,this.cxt.clearRect(0,0,256,256),this.cxt.fillText("0",130,200,200),this.texture2D.loadImageSource(this.cav),void(this.mat.albedoTexture=this.texture2D);this.mat=new Laya.UnlitMaterial,this._scorePlane.meshRenderer.sharedMaterial=this.mat,this.cav=Laya.Browser.createElement("canvas"),this.cxt=this.cav.getContext("2d"),this.cav.width=256,this.cav.height=256,this.cxt.fillStyle="rgb(255,0,0)",this.cxt.font="bold 200px 宋体",this.cxt.textAlign="center",this.cxt.textBaseline="center",this.cxt.fillText(this._score.toString(),130,200,200),this.mat.renderMode=Laya.UnlitMaterial.RENDERMODE_TRANSPARENT,this.texture2D=new Laya.Texture2D(256,256),this._scorePlane.meshRenderer.sharedMaterial.cull=Laya.RenderState.CULL_NONE}setScorePlane(){this._scorePlane&&(this.cxt.clearRect(0,0,256,256),this.cxt.fillText(this._score.toString(),130,200,200),this.texture2D.loadImageSource(this.cav),this.mat.albedoTexture=this.texture2D)}destroyBox(){}winCB(){this.isGameOver=!0,this.isWin=!0,this.isStartGame=!1,this._pole.destroy(),this._playerCrl.playDance(),Laya.timer.once(2e3,this,()=>{Laya.Scene.open("MyScenes/FinishUI.scene")});let t=this._camera.transform.localRotationEuler.clone();t.x+=20,o.RotateTo(this._camera,2e3,t,null);let e=this._camera.transform.position.clone();e.y-=6,o.TmoveTo(this._camera,2e3,e,null);let a=this._player.transform.localRotationEuler.clone();a.y+=180,o.RotateTo(this._player,500,a,null)}loseCB(t){if(l.DoVibrate(!1),d.Share.showTips(1),this.isGameOver=!0,this.isWin=!1,this.isStartGame=!1,this._playerCrl._ani.speed=1,t){this._playerCrl.playFall();let t=this._player.transform.position.clone();t.y-=50,o.TmoveTo(this._player,5e3,t,null)}else this._playerCrl.playDie();Laya.timer.once(2e3,this,()=>{Laya.Scene.open("MyScenes/FinishUI.scene")})}activeRoad(){if(this._roadNode)for(let t=0;t<this._roadNode.numChildren;t++){let e=this._roadNode.getChildAt(t);e.transform.position.z<this._player.transform.position.z-100||e.transform.position.z>this._player.transform.position.z+100?e.active=!1:e.active=!0}}restartGame(){this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.totalDistance=0,this._score=0,this._coinCount=0,this.isPause=!1,this._collisionArr=[],this._desArr=[],this._barArr=[],this.destroyBoxArr=[],this._camera.fieldOfView=this.startCamField,this.isFlying=!1,this.isDes=!1,this._levelNode.destroyChildren(),this._camera.transform.position=this.camStartPos,this._camera.transform.rotation=this.camStartRotation,this.createLevel()}}class g extends Laya.Scene{constructor(){super(),this.rootNode=this.rootNode,this.closeBtn=this.closeBtn,this.navList=this.navList,this.navData=[],this.scrollDir=1,this.preIndex=-1,this.closeCallbackFun=null,this.autoTime=0}onOpened(t){t&&t.closeCallbackFun&&(this.closeCallbackFun=t.closeCallbackFun),t&&t.posY&&(this.rootNode.y=t.posY),t&&1==t.fixY&&a.fixNodeY(this.rootNode),t&&t.autoTime&&(this.autoTime=t.autoTime),this._init()}onClosed(){Laya.timer.clearAll(this),this.closeCallbackFun&&this.closeCallbackFun()}autoClose(){Laya.timer.once(this.autoTime,this,this.closeCB)}clearAutoClose(){Laya.timer.clear(this,this.closeCB)}_init(){this.closeBtn.on(Laya.Event.CLICK,this,this.closeCB),a.tMove(this.rootNode,0,this.rootNode.y,200,()=>{Laya.timer.once(1e3,this,()=>{Laya.timer.frameLoop(1,this,this.scrollLoop)})}),this.initList(),0!=this.autoTime&&this.autoClose()}initList(){this.navData=[].concat(n.instance.navDataArr),this.navList.vScrollBarSkin="",this.navList.repeatX=3,this.navList.repeatY=Math.floor(this.navData.length/3),this.navList.array=this.navData,this.navList.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this.navList.mouseHandler=new Laya.Handler(this,this.mouseHandler)}mouseHandler(t,e){this.clearAutoClose(),this.againScroll()}againScroll(){Laya.timer.clear(this,this.scrollLoop),Laya.timer.once(1e3,this,()=>{Laya.timer.frameLoop(1,this,this.scrollLoop)})}scrollLoop(){let t=this.navList.scrollBar;t.value+=this.scrollDir,(t.value>=t.max||t.value<=0)&&(this.scrollDir=-this.scrollDir,this.againScroll())}onListRender(t,e){if(!(e>=this.navList.array.length)){var a=t.getChildByName("item"),i=a.getChildByName("icon"),s=a.getChildByName("name");i.skin=this.navData[e].icon,s.text=n.instance.getTitle(e),a.off(Laya.Event.CLICK,this,this.navCB,[e]),a.on(Laya.Event.CLICK,this,this.navCB,[e])}}navCB(t){console.log("click id:",t),l.aldEvent("抽屉弹窗页面-总点击数"),n.instance.NavigateApp(t,()=>{n.instance.openScene(i.SCENE_RECOMMENDUI,!1,{closeCallbackFun:()=>{Laya.timer.once(100,this,()=>{r.instance.showBanner()})}})},()=>{l.aldEvent("抽屉弹窗页面-总成功跳转")})}closeCB(){a.tMove(this.rootNode,-600,this.rootNode.y,200,()=>{this.close()})}}class f extends Laya.Script{constructor(){super(),this.isFix=!1}onAwake(){if(this.isFix){let t=this.owner;a.fixNodeY(t)}}onDestroy(){}}class C extends Laya.Scene{constructor(){super(),this.navList=this.navList,this.navData=[],this.from=null,this.totalArr=[],this.curIndex=6,this.fingerNum=0}onOpened(t){t&&(t.posY&&(this.navList.y=t.posY),1==t.fixY&&a.fixNodeY(this.navList),t.from&&(this.from=t.from)),this._init()}onClosed(){Laya.timer.clearAll(this)}_init(){this.navData=[],this.totalArr=[].concat(n.instance.navDataArr),this.navData=this.totalArr.slice(0,6),this.initList()}initList(){this.navList.vScrollBarSkin="",this.navList.repeatX=3,this.navList.repeatY=2,this.navList.array=this.navData,this.navList.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this.fingerNum=Math.floor(6*Math.random())}onListRender(t,e){if(!(e>=this.navList.array.length)){var a=t.getChildByName("item"),i=a.getChildByName("icon"),n=a.getChildByName("navFinger");i.skin=this.navData[e].icon,a.off(Laya.Event.CLICK,this,this.navCB,[this.navData[e],e]),a.on(Laya.Event.CLICK,this,this.navCB,[this.navData[e],e]),n.visible=e==this.fingerNum}}navCB(t,e){console.log("click id:",this.totalArr.indexOf(t)),n.instance.NavigateApp(this.totalArr.indexOf(t),()=>{n.instance.openScene(i.SCENE_FULLGAMEUI,!1,{continueCallbackFun:()=>{r.instance.showBanner()}})}),this.navData[e]=this.totalArr[this.curIndex],this.curIndex++,this.curIndex>=this.totalArr.length&&(this.curIndex=0),this.initList()}}const S=550;class v extends Laya.Scene{constructor(){super(),this.rootNode=this.rootNode,this.closeBtn=this.closeBtn,this.navList=this.navList,this.navData=[],this.scrollDir=1,this.preIndex=-1,this.closeCallbackFun=null}onOpened(t){t&&t.closeCallbackFun&&(this.closeCallbackFun=t.closeCallbackFun),this._init()}onClosed(){clearTimeout(l.bannerTO2),r.instance.hideBanner(),r.instance.showBanner(),Laya.timer.clearAll(this),this.closeCallbackFun&&this.closeCallbackFun()}_init(){this.rootNode.y=S,this.rootNode.y=this.rootNode.y*Laya.stage.displayHeight/Laya.stage.designHeight,this.closeBtn.on(Laya.Event.CLICK,this,this.closeCB),r.instance.hideBanner(),l.isValidBanner()?l.fixBtnTouchPos(this.closeBtn,-100,-300,this,null,!0):Laya.timer.once(100,this,()=>{r.instance.showBanner()}),this.initList()}initList(){this.navData=[].concat(n.instance.navDataArr),this.navList.vScrollBarSkin="",this.navList.repeatX=3,this.navList.repeatY=Math.floor(this.navData.length/3),this.navList.array=this.navData,this.navList.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this.navList.mouseHandler=new Laya.Handler(this,this.mouseHandler),Laya.timer.once(1e3,this,()=>{Laya.timer.frameLoop(1,this,this.scrollLoop)})}mouseHandler(t,e){this.againScroll()}againScroll(){Laya.timer.clear(this,this.scrollLoop),Laya.timer.once(1e3,this,()=>{Laya.timer.frameLoop(1,this,this.scrollLoop)})}scrollLoop(){let t=this.navList.scrollBar;t.value+=this.scrollDir,(t.value>=t.max||t.value<=0)&&(this.scrollDir=-this.scrollDir,this.againScroll())}onListRender(t,e){if(!(e>=this.navList.array.length)){var a=t.getChildByName("item"),i=a.getChildByName("icon"),s=a.getChildByName("name");i.skin=this.navData[e].icon,s.text=n.instance.getTitle(e),a.off(Laya.Event.CLICK,this,this.navCB,[e]),a.on(Laya.Event.CLICK,this,this.navCB,[e])}}navCB(t){console.log("click id:",t),l.aldEvent("好友都在玩的爆款游戏弹窗-总点击数"),n.instance.NavigateApp(t,()=>{n.instance.openScene(i.SCENE_FULLGAMEUI,!1,{continueCallbackFun:()=>{r.instance.showBanner()}})},()=>{l.aldEvent("好友都在玩的爆款游戏弹窗-总成功跳转")})}closeCB(){this.close()}}class B extends Laya.Script{constructor(){super()}onAwake(){let t=this.owner;t.y=t.y*Laya.stage.displayHeight/1334}}class w extends Laya.Scene{constructor(){super(),this.exitBtn=this.exitBtn,this.continueBtn=this.continueBtn,this.navList=this.navList,this.navData=[],this.scrollDir=1,this.preIndex=-1,this.hotArr=[],this.continueCallbackFun=null,this.curGrade=-1,this.btnStartY=0,this.btnEndY=0}onOpened(t){t&&t.continueCallbackFun&&(this.continueCallbackFun=t.continueCallbackFun),t&&t.grade&&(this.curGrade=t.grade),this._init(),this.btnEndY=this.navList.y+this.navList.height-this.continueBtn.height/2-20,this.btnStartY=Laya.stage.displayHeight-this.continueBtn.height,r.instance.hideBanner(),this.exitBtn.visible=e.getPlayerData().grade>=n.instance.dataConfig.front_randompaly_start_level&&l.isValidBanner(),n.instance.dataConfig.front_all_screen_auto?(this.continueBtn.y=l.isValidBanner()?this.btnStartY:this.btnEndY,this.randomCB(!0)):l.fixBtnTouchPos(this.continueBtn,this.btnStartY,this.btnEndY,this,null,!0)}onClosed(){Laya.timer.once(100,this,()=>{this.continueCallbackFun&&this.continueCallbackFun(),Laya.timer.clearAll(this)}),clearTimeout(l.bannerTO2),r.instance.hideBanner()}_init(){this.exitBtn.on(Laya.Event.CLICK,this,this.randomCB),this.continueBtn.on(Laya.Event.CLICK,this,this.continueCB),this.initList()}getHotRandArr(){let t=[0,1,2,3,4,5,6,7,8];t=a.shuffleArr(t),this.hotArr=t.slice(0,3)}initList(){this.navData=[].concat(n.instance.navDataArr),this.navList.vScrollBarSkin="",this.navList.repeatX=3,this.navList.repeatY=Math.floor(this.navData.length/3),this.navList.array=this.navData,this.navList.height=Laya.stage.displayHeight-this.navList.y-260,this.navList.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this.navList.mouseHandler=new Laya.Handler(this,this.mouseHandler),Laya.timer.once(1e3,this,()=>{Laya.timer.frameLoop(1,this,this.scrollLoop)})}mouseHandler(t,e){this.againScroll()}againScroll(){Laya.timer.clear(this,this.scrollLoop),Laya.timer.once(1e3,this,()=>{Laya.timer.frameLoop(1,this,this.scrollLoop)})}scrollLoop(){let t=this.navList.scrollBar;t.value+=this.scrollDir,(t.value>=t.max||t.value<=0)&&(this.scrollDir=-this.scrollDir,this.againScroll())}onListRender(t,e){if(!(e>=this.navList.array.length)){var a=t.getChildByName("item"),i=a.getChildByName("icon"),s=a.getChildByName("name"),r=a.getChildByName("hot");a.getChildByName("color").skin="JJExportRes/"+(Math.floor(e%9)+1)+".png",i.skin=this.navData[e].icon,s.text=n.instance.getTitle(e),r.visible=-1!=this.hotArr.indexOf(e),a.off(Laya.Event.CLICK,this,this.navCB,[e]),a.on(Laya.Event.CLICK,this,this.navCB,[e])}}navCB(t,e){console.log("click id:",t),l.aldEvent("网红爆款游戏全屏幕导出页-总点击数"),n.instance.NavigateApp(t,()=>{!0===e&&l.fixBtnTouchPos(this.continueBtn,this.btnStartY,this.btnEndY,this,null,!0)},()=>{l.aldEvent("网红爆款游戏全屏幕导出页-总成功跳转数"),!0===e&&l.fixBtnTouchPos(this.continueBtn,this.btnStartY,this.btnEndY,this,null,!0)})}randomCB(t){let e=Math.floor(6*Math.random());this.navCB(e,t)}continueCB(){this.close()}}class _ extends Laya.Scene{constructor(){super(),this.myList=null,this.navData=[],this.scrollLeft=!1,this.preIndex=-1,this.randArr=[],this.fromDrawUI=!1,this.fromFullUI=!1,this.closeCallbackFun=null}onOpened(t){t&&t.closeCallbackFun&&(this.closeCallbackFun=t.closeCallbackFun),this.backBtn.on(Laya.Event.CLICK,this,this.backCB),this.continueBtn.on(Laya.Event.CLICK,this,this.randomNav),n.instance.dataConfig.front_all_screen_auto?this.randomNav(!0):l.bannerWuChu2(),this.initList(),r.instance.hideBanner()}onClosed(){Laya.timer.clearAll(this)}randomNav(t){let e=Math.floor(6*Math.random());this.navCB(e,t)}backCB(){this.closeCallbackFun&&this.closeCallbackFun(),this.close()}initList(){let t=[].concat(n.instance.navDataArr);this.navData=t;for(let t=0;t<10;t++)this.randArr.push(t);this.randArr=o.shuffleArr(this.randArr),this.randArr.splice(6,this.navData.length-4),this.myList.vScrollBarSkin="",this.myList.repeatX=1,this.myList.repeatY=t.length,this.myList.array=t,this.myList.height=1100*Laya.stage.displayHeight/1334,this.myList.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this.myList.mouseHandler=new Laya.Handler(this,this.mouseHandler),Laya.timer.once(1e3,this,this.scrollLoop)}mouseHandler(t,e){Laya.timer.clear(this,this.scrollLoop),Laya.timer.once(1e3,this,this.scrollLoop)}scrollLoop(){let t=Math.floor(this.myList.startIndex);this.scrollLeft?--t<0&&(this.scrollLeft=!this.scrollLeft):(t++,this.preIndex==Math.floor(this.myList.startIndex)&&Math.floor(this.myList.startIndex)>0&&(t--,this.scrollLeft=!this.scrollLeft)),this.preIndex=Math.floor(this.myList.startIndex),this.myList.tweenTo(t,1e3,Laya.Handler.create(this,this.scrollLoop))}onListRender(t,e){if(!(e>=this.myList.array.length)){var a=t.getChildByName("item"),i=a.getChildByName("icon"),n=a.getChildByName("name"),s=a.getChildByName("star");a.getChildByName("tips").text=Math.floor(999999*Math.random()+1e5).toString()+"人正在玩",s.visible=!1,i.skin=this.navData[e].icon,n.text=this.navData[e].title,a.off(Laya.Event.CLICK,this,this.navCB,[e]),a.on(Laya.Event.CLICK,this,this.navCB,[e]);for(let t=0;t<this.randArr.length;t++)if(this.randArr[t]==e){s.visible=!0;break}}}navCB(t,e){console.log("click id:",t),l.aldEvent("游戏历史列表全屏幕导出页-总点击数"),n.instance.NavigateApp(t,()=>{!0===e&&l.bannerWuChu2()},()=>{l.aldEvent("游戏历史列表全屏幕导出页-总成功跳转"),!0===e&&l.bannerWuChu2()})}}class b extends Laya.Scene{constructor(){super(),this.backBtn=this.backBtn,this.navList=this.navList,this.navData=[],this.scrollDir=1,this.preIndex=-1,this.closeCallbackFun=null,this.fingerNum=0,this.btnStartY=0,this.btnEndY=0}onOpened(t){t&&t.closeCallbackFun&&(this.closeCallbackFun=t.closeCallbackFun),this._init(),this.btnEndY=this.navList.y+this.navList.height-this.continueBtn.height/2-20,this.btnStartY=Laya.stage.displayHeight-this.continueBtn.height,r.instance.hideBanner(),this.continueBtn.visible=e.getPlayerData().grade>=n.instance.dataConfig.front_continuegame_start_level&&l.isValidBanner(),n.instance.dataConfig.front_remen_screen_auto?(this.continueBtn.y=l.isValidBanner()?this.btnStartY:this.btnEndY,this.continueBtnCB(!0)):l.fixBtnTouchPos(this.continueBtn,this.btnStartY,this.btnEndY,this,null,!0)}onClosed(){Laya.timer.clearAll(this),clearTimeout(l.bannerTO2),r.instance.hideBanner()}_init(){this.backBtn.on(Laya.Event.CLICK,this,this.closeCB),this.continueBtn.on(Laya.Event.CLICK,this,this.continueBtnCB),this.initList()}initList(){this.navData=[].concat(n.instance.navDataArr),this.navList.vScrollBarSkin="",this.navList.repeatX=2,this.navList.repeatY=Math.floor(this.navData.length/2),this.navList.array=this.navData,this.navList.height=Laya.stage.displayHeight-this.navList.y-260,this.navList.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this.navList.mouseHandler=new Laya.Handler(this,this.mouseHandler),this.fingerNum=Math.floor(6*Math.random()),Laya.timer.once(1e3,this,()=>{Laya.timer.frameLoop(1,this,this.scrollLoop)})}mouseHandler(t,e){this.againScroll()}againScroll(){Laya.timer.clear(this,this.scrollLoop),Laya.timer.once(1e3,this,()=>{Laya.timer.frameLoop(1,this,this.scrollLoop)})}scrollLoop(){let t=this.navList.scrollBar;t.value+=this.scrollDir,(t.value>=t.max||t.value<=0)&&(this.scrollDir=-this.scrollDir,this.againScroll())}onListRender(t,e){if(!(e>=this.navList.array.length)){var a=t.getChildByName("item"),i=a.getChildByName("icon"),s=a.getChildByName("name"),r=a.getChildByName("navFinger");i.skin=this.navData[e].icon,s.text=n.instance.getTitle(e),a.off(Laya.Event.CLICK,this,this.navCB,[e]),a.on(Laya.Event.CLICK,this,this.navCB,[e]),r.visible=e==this.fingerNum}}navCB(t,e){console.log("click id:",t),l.aldEvent("热门推荐全屏幕导出页-总点击数"),n.instance.NavigateApp(t,()=>{!0===e&&l.fixBtnTouchPos(this.continueBtn,this.btnStartY,this.btnEndY,this,null,!0)},()=>{l.aldEvent("热门推荐全屏幕导出页-总成功跳转"),!0===e&&l.fixBtnTouchPos(this.continueBtn,this.btnStartY,this.btnEndY,this,null,!0)})}continueBtnCB(t){let e=Math.floor(6*Math.random());this.navCB(e,t)}closeCB(){this.closeCallbackFun&&this.closeCallbackFun(),this.close()}}class x extends Laya.Scene{constructor(){super(),this.navList=this.navList,this.navData=[],this.scrollDir=1,this.preIndex=-1}onOpened(t){t&&(t.posY&&(this.navList.y=t.posY),1==t.fixY&&a.fixNodeY(this.navList)),this.initList()}onClosed(){Laya.timer.clearAll(this)}initList(){this.navData=[].concat(n.instance.navDataArr),this.navList.hScrollBarSkin="",this.navList.repeatX=this.navData.length,this.navList.repeatY=1,this.navList.array=this.navData,this.navList.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this.navList.mouseHandler=new Laya.Handler(this,this.mouseHandler),this.scrollLoop()}mouseHandler(t,e){Laya.timer.clear(this,this.scrollLoop),Laya.timer.once(1e3,this,this.scrollLoop)}scrollLoop(){Laya.timer.once(1e3,this,()=>{let t=Math.floor(this.navList.startIndex);1==this.scrollDir?++t>=this.navData.length-4&&(t--,this.scrollDir=-this.scrollDir):--t<0&&(this.scrollDir=-this.scrollDir),this.navList.tweenTo(t,1e3,Laya.Handler.create(this,this.scrollLoop))})}onListRender(t,e){if(!(e>=this.navList.array.length)){var a=t.getChildByName("item");a.getChildByName("icon").skin=this.navData[e].icon,a.off(Laya.Event.CLICK,this,this.navCB,[e]),a.on(Laya.Event.CLICK,this,this.navCB,[e])}}navCB(t){console.log("click id:",t),n.instance.NavigateApp(t,()=>{n.instance.openScene(i.SCENE_FULLGAMEUI)})}}class D extends Laya.Scene{constructor(){super()}onOpened(t){this.initNav(),Laya.timer.loop(3e3,this,this.initNav);for(let t=0;t<this.navNode.numChildren;t++){let e=this.navNode.getChildAt(t);o.rotateLoop(e,10,300)}}onClosed(){}initNav(){if(n.instance.navDataArr.length<=0)return;let t=[].concat(n.instance.navDataArr),e=[];for(let a=0;a<t.length;a++)e.push(a);e=(e=o.shuffleArr(e)).splice(0,4);let a=this.navNode;for(let i=0;i<4;i++){let n=a.getChildAt(i),s=n.getChildByName("icon"),r=n.getChildByName("name");s.skin=t[e[i]].icon,r.text=t[e[i]].title,n.off(Laya.Event.CLICK,this,this.navCB),n.on(Laya.Event.CLICK,this,this.navCB,[e[i]])}}navCB(t){console.log("click id:",t),n.instance.NavigateApp(t,()=>{n.instance.openScene(i.SCENE_RECOMMENDUI,!1,{closeCallbackFun:()=>{Laya.timer.once(100,this,()=>{r.instance.showBanner()})}})},()=>{})}}class I extends Laya.Scene{constructor(){super(),this.playerNames=["有个小可爱","大妈杀手","神秘靓仔","超级飞侠乐迪","几一鸡","爱喝可乐","卖葫芦的葫芦娃","多啦ABCD梦","坏女孩","沙雕网友"]}onAwake(){this.height=Laya.stage.height,I.currentPlayerNames&&0!=I.currentPlayerNames.length||(I.currentPlayerNames=[].concat(this.playerNames)),I.currentGames&&0!=I.currentGames.length||(I.currentGames=[0,1,2,3,4,5]),this.currentName=I.currentPlayerNames.shift()}onOpened(){this.lbName.text=this.currentName,this.bg.top=-150,Laya.Tween.to(this.bg,{top:10},500);var t=I.currentGames.shift();this.bg.on(Laya.Event.CLICK,this,this.navCB,[t]),this.lbGame.text="邀请你一起玩 "+n.instance.getTitle(t),l.aldEvent("好友消息提示横幅出现次数")}onClosed(){Laya.timer.clearAll(this)}navCB(t){n.instance.closeScene(i.SCENE_WECHATUI),l.aldEvent("好友消息提示横幅-总点击数"),console.log("click id:",t),n.instance.NavigateApp(t,()=>{},()=>{l.aldEvent("好友消息提示横幅-总成功跳转数")})}}class k extends Laya.Scene{constructor(){super()}onOpened(t){this.coinNum.value=e.getPlayerData().coin.toString(),this.bounesNum.value=L.Share.isWin?(L.Share._coinCount+L.Share._score).toString():"0",this.winTitle.visible=L.Share.isWin,this.loseTitle.visible=!L.Share.isWin,this.trippleBtn.visible=L.Share.isWin,this.skipBtn.visible=!L.Share.isWin,this.normalBtn.visible=L.Share.isWin,this.restartBtn.visible=!L.Share.isWin,this.trippleBtn.on(Laya.Event.CLICK,this,this.trippleBtnCB),this.skipBtn.on(Laya.Event.CLICK,this,this.skipBtnCB),this.normalBtn.on(Laya.Event.CLICK,this,this.normalBtnCB),this.restartBtn.on(Laya.Event.CLICK,this,this.restartBtnCB)}onClosed(){}trippleBtnCB(){h.instance.playSoundEffect("Click.mp3");s.instance.shareGame(()=>{e.getPlayerData().coin+=3*parseInt(this.bounesNum.value),e.getPlayerData().grade++,this.back()})}skipBtnCB(){h.instance.playSoundEffect("Click.mp3");s.instance.shareGame(()=>{e.getPlayerData().grade++,this.back()})}normalBtnCB(){h.instance.playSoundEffect("Click.mp3"),e.getPlayerData().coin+=parseInt(this.bounesNum.value),e.getPlayerData().grade++,this.back()}restartBtnCB(){h.instance.playSoundEffect("Click.mp3"),this.back()}back(){e.setPlayerData(),Laya.Scene.open("MyScenes/StartUI.scene"),L.Share.restartGame()}}class N extends Laya.Scene{constructor(){super(),this.count=0}onOpened(){l.aldEvent("加载页面"),this.loadJsonData()}onClosed(){}loadJsonData(){for(let t=1;t<=10;t++)o.loadJson("res/config/Road1/"+t+".json",t=>{e.roadArr1.push(t),this.loadJsonComplete()});for(let t=1;t<=10;t++)o.loadJson("res/config/Road2/"+t+".json",t=>{e.roadArr2.push(t),this.loadJsonComplete()});for(let t=1;t<=10;t++)o.loadJson("res/config/Road3/"+t+".json",t=>{e.roadArr3.push(t),this.loadJsonComplete()})}loadJsonComplete(){this.count++,this.count>=30&&(console.log(e.roadArr1),console.log(e.roadArr2),console.log(e.roadArr3),Laya.Browser.onWeiXin?this.loadSubpackage():this.loadRes())}loadSubpackage(){Laya.Browser.window.wx.loadSubpackage({name:"unity",success:t=>{this.loadRes()},fail:t=>{this.loadSubpackage()}}).onProgressUpdate(t=>{console.log("下载进度",t.progress),console.log("已经下载的数据长度",t.totalBytesWritten),console.log("预期需要下载的数据总长度",t.totalBytesExpectedToWrite)})}loadRes(){var t=[l.UnityPath+"Bar_01.lh",l.UnityPath+"Box_01.lh",l.UnityPath+"Building_01.lh",l.UnityPath+"Hero_01.lh",l.UnityPath+"Jewel_01.lh",l.UnityPath+"Pole_01.lh",l.UnityPath+"Road_01.lh",l.UnityPath+"Road_02.lh",l.UnityPath+"Road_03.lh",l.UnityPath+"Road_Finish.lh",l.UnityPath+"Saw_01.lh",l.UnityPath+"Wall_01.lh",l.UnityPath+"Wall_02.lh",l.UnityPath+"Wall_03.lh",l.UnityPath+"Cyl_01.lh",l.UnityPath+"PropPole.lh"];Laya.loader.create(t,Laya.Handler.create(this,this.onComplete),Laya.Handler.create(this,this.onProgress))}onComplete(){L.Share.initScene()}onProgress(t){this.bar.value=t}}class E extends Laya.Scene{constructor(){super(),this.closeCallback=null,this.hadShowBanner=!1,this.maxPer=100}onOpened(t){null!=t&&null!=t&&(this.closeCallback=t.closeCallback),this.clickBtn.on(Laya.Event.MOUSE_DOWN,this,this.clickBtnCBDown),this.clickBtn.on(Laya.Event.MOUSE_UP,this,this.clickBtnCBUp),this.maxPer=o.GetRandom(n.instance.dataConfig.front_box_progress[0],n.instance.dataConfig.front_box_progress[1]),r.instance.hideBanner(),Laya.timer.frameLoop(1,this,this.decBar),l.isKillBossUI=!0,l.WxOffHide(l.killbossCallback),l.killbossCallback=(()=>{l.isKillBossUI&&Laya.timer.once(100,this,()=>{Laya.Scene.close("MyScenes/MadUI.scene")})}),l.WxOnHide(l.killbossCallback)}onClosed(){r.instance.hideBanner(),Laya.timer.clearAll(this),this.closeCallback&&Laya.timer.once(100,this,()=>{this.closeCallback()}),l.isKillBossUI=!1}decBar(){this.bar.value-=.001,this.bar.value<0&&(this.bar.value=0)}clickBtnCBDown(){this.boxAni.play(0,!1),this.bar.value+=.2,this.bar.value>1&&(this.bar.value=1),this.hadShowBanner||100*this.bar.value>=this.maxPer&&(r.instance.showBanner(!0),Laya.timer.once(5e3,this,()=>{this.closeBtnCB()}),this.hadShowBanner=!0,Laya.timer.clear(this,this.decBar)),this.clickBtn.scaleX=1.1,this.clickBtn.scaleY=1.1}clickBtnCBUp(){this.clickBtn.scaleX=1,this.clickBtn.scaleY=1}closeBtnCB(){this.close()}}class A extends Laya.Scene{constructor(){super(),this.curPage=0,this.chooseId=0,this.scene3D=null,this.light=null,this.camera=null,this.player=null,this.skinScene=null}onOpened(){Laya.timer.frameLoop(1,this,this.updateCB),this.skinBtn.on(Laya.Event.CLICK,this,this.skinBtnCB),this.motionBtn.on(Laya.Event.CLICK,this,this.motionBtnCB),this.useBtn.on(Laya.Event.CLICK,this,this.useBtnCB),this.adBtn.on(Laya.Event.CLICK,this,this.adBtnCB),this.backBtn.on(Laya.Event.CLICK,this,this.backBtnCB),this.init3DScene(),this.skinBtnCB()}onClosed(){Laya.timer.clearAll(this),this.scene3D.destroy(),L.Share._camera.active=!0}init3DScene(){this.scene3D=Laya.stage.addChild(new Laya.Scene3D),Laya.stage.setChildIndex(this.scene3D,0),this.light=this.scene3D.addChild(new Laya.DirectionLight),this.light.color=new Laya.Vector3(1,.956,.839),this.camera=this.scene3D.addChild(new Laya.Camera(0,.1,1e3)),this.camera.transform.translate(new Laya.Vector3(0,0,0)),this.camera.transform.rotate(new Laya.Vector3(-20,0,0),!0,!1),this.camera.clearFlag=Laya.BaseCamera.CLEARFLAG_DEPTHONLY,this.camera.fieldOfView=90,this.skinScene=o.getSprite3DResByUrl("Cyl_01.lh",this.scene3D),this.skinScene.transform.position=new Laya.Vector3(0,-2,-15),this.player=o.getSprite3DResByUrl("Hero_01.lh",this.scene3D),this.player.transform.position=new Laya.Vector3(0,-2,-15),this.player.transform.localScale=new Laya.Vector3(2.5,2.5,2.5),this.player.getComponent(Laya.Animator).play("dance"),this.player.getChildByName("LandFX").active=!1,this.player.getChildByName("Trail1").active=!1,this.player.getChildByName("Trail2").active=!1,this.player.getChildByName("Trail3").active=!1,this.player.getChildByName("Trail4").active=!1,this.player.getChildByName("Trail5").active=!1,this.player.getChildByName("Trail6").active=!1,this.player.getChildByName("SpeedFX").active=!1}changeSkin(t){let e=new Laya.UnlitMaterial;Laya.Texture2D.load("res/skinRes/Hero_0"+(t+1)+".png",Laya.Handler.create(this,t=>{e.albedoTexture=t}));for(let t=0;t<1;t++){this.player.getChildAt(t).skinnedMeshRenderer.material=e}}trailMode(){this.player.getComponent(Laya.Animator).play("run"),o.RotateTo(this.player,100,new Laya.Vector3(0,90,0),()=>{}),this.activeTrail(this.chooseId),Laya.timer.frameLoop(1,this,this.playerMove)}activeTrail(t){this.player.getChildByName("Trail1").active=!1,this.player.getChildByName("Trail2").active=!1,this.player.getChildByName("Trail3").active=!1,this.player.getChildByName("Trail4").active=!1,this.player.getChildByName("Trail5").active=!1,this.player.getChildByName("Trail6").active=!1,t>=0&&(this.player.getChildByName("Trail"+(t+1)).active=!0)}playerMove(){this.player.transform.translate(new Laya.Vector3(.3,0,0),!1),this.skinScene.transform.translate(new Laya.Vector3(.3,0,0),!1),this.camera.transform.translate(new Laya.Vector3(.3,0,0),!1)}skinMode(){this.player.getComponent(Laya.Animator).play("dance"),o.RotateTo(this.player,100,new Laya.Vector3(0,0,0),()=>{})}fixCameraField(){let t=(Laya.stage.displayHeight-1334<0?0:Laya.stage.displayHeight-1334)/290*10;this.camera.fieldOfView+=t}updateItem(){for(let t=0;t<this.itemNode.numChildren;t++){if(0==this.curPage&&t==this.itemNode.numChildren-1){this.itemNode.getChildAt(t).visible=!1;continue}this.itemNode.getChildAt(t).visible=!0;let a=this.itemNode.getChildAt(t),i=a.getChildByName("icon"),n=a.getChildByName("choose"),s=a.getChildByName("tips");0==this.curPage?(a.skin=1==e.getPlayerData().skinArr[t]?"skinUI/pf_yy_1.png":"skinUI/pf_wyy_1.png",i.skin="skinUI/pf_js_"+(t+1)+".png",n.visible=t==this.chooseId,s.visible=0==e.getPlayerData().skinArr[t]||e.getPlayerData().skinId==t,s.skin=t==e.getPlayerData().skinId?"skinUI/tw_syz_1.png":"skinUI/tw_syy_1.png"):(a.skin="skinUI/tw_mr_"+(t+1)+".png",i.skin="",n.visible=t==this.chooseId,s.visible=0==e.getPlayerData().msArr[t]||e.getPlayerData().msId==t,s.skin=t==e.getPlayerData().msId?"skinUI/tw_syz_1.png":"skinUI/tw_syy_1.png"),a.off(Laya.Event.CLICK,this,this.itemCB),a.on(Laya.Event.CLICK,this,this.itemCB,[t])}}itemCB(t){this.chooseId=t,this.costNum.visible=!1,0==this.curPage?(this.changeSkin(this.chooseId),1==e.getPlayerData().skinArr[t]?e.getPlayerData().skinId==t?this.useBtn.skin="skinUI/tw_btn_4.png":this.useBtn.skin="skinUI/tw_btn_2.png":(this.useBtn.skin="skinUI/tw_btn_3.png",this.costNum.visible=!0,this.costNum.value="3000")):(this.activeTrail(t),1==e.getPlayerData().msArr[t]?e.getPlayerData().msId==t?this.useBtn.skin="skinUI/tw_btn_4.png":this.useBtn.skin="skinUI/tw_btn_2.png":(this.useBtn.skin="skinUI/tw_btn_3.png",this.costNum.visible=!0,this.costNum.value="2000")),this.updateItem()}skinBtnCB(){h.instance.playSoundEffect("Click.mp3"),this.curPage=0,this.chooseId=e.getPlayerData().skinId,this.changeSkin(this.chooseId),this.costNum.visible=!1,this.useBtn.skin="skinUI/tw_btn_4.png",this.skinBtn.skin="skinUI/tw_yq_4.png",this.motionBtn.skin="skinUI/tw_yq_2.png",this.updateItem(),this.activeTrail(-1),Laya.timer.clearAll(this.playerMove),this.skinMode()}motionBtnCB(){h.instance.playSoundEffect("Click.mp3"),this.curPage=1,this.chooseId=e.getPlayerData().msId,this.costNum.visible=!1,this.useBtn.skin="skinUI/tw_btn_4.png",this.skinBtn.skin="skinUI/tw_yq_2.png",this.motionBtn.skin="skinUI/tw_yq_4.png",this.updateItem(),this.trailMode()}useBtnCB(){h.instance.playSoundEffect("Click.mp3"),"skinUI/tw_btn_2.png"==this.useBtn.skin?0==this.curPage?e.getPlayerData().skinId=this.chooseId:e.getPlayerData().msId=this.chooseId:"skinUI/tw_btn_3.png"==this.useBtn.skin&&(0==this.curPage?e.getPlayerData().coin>=3e3?(e.getPlayerData().skinArr[this.chooseId]=1,e.getPlayerData().skinId=this.chooseId,e.getPlayerData().coin-=3e3,this.costNum.visible=!1,this.useBtn.skin="skinUI/tw_btn_4.png",h.instance.playSoundEffect("Buy.mp3")):l.OpenAlert("钻石不足！"):e.getPlayerData().coin>=2e3?(e.getPlayerData().msArr[this.chooseId]=1,e.getPlayerData().msId=this.chooseId,e.getPlayerData().coin-=2e3,this.costNum.visible=!1,this.useBtn.skin="skinUI/tw_btn_4.png",h.instance.playSoundEffect("Buy.mp3")):l.OpenAlert("钻石不足！")),e.setPlayerData(),L.Share._playerCrl.changeSkin(e.getPlayerData().skinId),L.Share._playerCrl.refreshTrail(),this.updateItem()}adBtnCB(){h.instance.playSoundEffect("Click.mp3");s.instance.shareGame(()=>{e.getPlayerData().coin+=1e3,e.setPlayerData(),l.OpenAlert("获得1000钻石！")})}backBtnCB(){h.instance.playSoundEffect("Click.mp3"),Laya.Scene.open("MyScenes/StartUI.scene")}updateCB(){this.coinNum.value=e.getPlayerData().coin.toString()}}class P extends Laya.Scene{constructor(){super(),this.hadStart=!1}onAwake(){h.instance.playMusic("Bgm.mp3")}onOpened(){this.gradeNum.text=e.getPlayerData().grade.toString(),this.startBtn.on(Laya.Event.CLICK,this,this.startBtnCB),this.skinBtn.on(Laya.Event.CLICK,this,this.skinBtnCB),Laya.timer.frameLoop(1,this,this.updateCB)}onClosed(){Laya.timer.clearAll(this)}startBtnCB(){h.instance.playSoundEffect("Click.mp3"),this.hadStart||(this.hadStart=!0,L.Share.gameStart())}skinBtnCB(){h.instance.playSoundEffect("Click.mp3"),L.Share._camera.active=!1,Laya.Scene.open("MyScenes/SkinUI.scene")}moreGameBtnCB(){h.instance.playSoundEffect("Click.mp3"),r.instance.hideBanner(),n.instance.openScene(i.SCENE_FULLGAMEUI,!1,{continueCallbackFun:()=>{n.instance.openScene(i.SCENE_DRAWUI,!1,{autoTime:1500}),r.instance.showBanner()}})}drawBtnCB(){h.instance.playSoundEffect("Click.mp3"),n.instance.openScene(i.SCENE_DRAWUI),l.aldEvent("点击抽屉按钮人数")}updateCB(){this.coinNum.value=e.getPlayerData().coin.toString()}}class O{constructor(){}static init(){var t=Laya.ClassUtils.regClass;t("JJExport/View/DrawUI.ts",g),t("JJExport/Libs/AutoFixPosY.ts",f),t("JJExport/View/FinishGameUI.ts",C),t("JJExport/View/FriendGameUI.ts",v),t("Libs/FixNodeY.ts",B),t("JJExport/View/FullGameUI.ts",w),t("JJExport/View/ProgramUI.ts",_),t("JJExport/View/RecommendUI.ts",b),t("JJExport/View/ScrollUI.ts",x),t("JJExport/View/StartNavUI.ts",D),t("JJExport/View/WeChatUI.ts",I),t("View/FinishUI.ts",k),t("View/GameUI.ts",d),t("View/LoadingUI.ts",N),t("View/MadUI.ts",E),t("View/SkinUI.ts",A),t("View/StartUI.ts",P)}}O.width=750,O.height=1334,O.scaleMode="fixedwidth",O.screenMode="vertical",O.alignV="top",O.alignH="left",O.startScene="MyScenes/GameUI.scene",O.sceneRoot="",O.debug=!1,O.stat=!1,O.physicsDebug=!1,O.exportSceneToJson=!0,O.init();new class{constructor(){window.Laya3D?Laya3D.init(O.width,O.height):Laya.init(O.width,O.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=O.scaleMode,Laya.stage.screenMode=O.screenMode,Laya.stage.alignV=O.alignV,Laya.stage.alignH=O.alignH,Laya.URL.exportSceneToJson=O.exportSceneToJson,Laya.stage.useRetinalCanvas=!0,(O.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),O.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),O.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){new L}}}();